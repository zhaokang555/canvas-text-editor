var Y=Object.defineProperty;var v=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var L=(h,t,i)=>t in h?Y(h,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):h[t]=i,I=(h,t)=>{for(var i in t||(t={}))A.call(t,i)&&L(h,i,t[i]);if(v)for(var i of v(t))F.call(t,i)&&L(h,i,t[i]);return h};var s=(h,t,i)=>(L(h,typeof t!="symbol"?t+"":t,i),i);import{V as b,j as W,r as B,R as D,a as X}from"./vendor.4f28c16a.js";const q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(e){if(e.ep)return;e.ep=!0;const o=i(e);fetch(e.href,o)}};q();class E{constructor(t,i,n,e,o,c){s(this,"offsetY");s(this,"calcLayoutForChars",()=>{let t=this.left;this.chars.forEach(i=>{i.setPosition(t,this.top+this.offsetY),t+=i.width})});this.chars=t,this.width=i,this.height=n,this.ctx=e,this.left=o,this.top=c,this.offsetY=Math.max(...this.chars.map(l=>l.textMetrics.fontBoundingBoxAscent)),this.calcLayoutForChars()}}class N{constructor(t,i,n,e,o){s(this,"softLines",[]);s(this,"width",0);s(this,"height",0);s(this,"calcLayoutForSoftLines",()=>{let t=[],i=0,n=0,e=this.top;if(this.chars.forEach(o=>{if(t.length===0)t.push(o),i+=o.width,n=Math.max(n,o.height);else if(i+o.width<=this.maxWidth)t.push(o),i+=o.width,n=Math.max(n,o.height);else{const c=new E(t,i,n,this.ctx,this.left,e);this.softLines.push(c),e+=n,t=[o],i=o.width,n=o.height}}),t.length>0){const o=new E(t,i,n,this.ctx,this.left,e);this.softLines.push(o)}});s(this,"calcLayout",()=>{this.width=Math.max(...this.softLines.map(t=>t.width)),this.height=this.softLines.reduce((t,i)=>t+i.height,0)});s(this,"render",()=>{this.chars.forEach(t=>t.render())});this.chars=t,this.ctx=i,this.left=n,this.top=e,this.maxWidth=o,this.calcLayoutForSoftLines(),this.calcLayout(),this.chars.forEach((c,l)=>{c.prev=this.chars[l-1]||null})}destructor(){this.chars.forEach(t=>t.destructor())}}var x;(function(h){h.defaultCursor="default",h.ewResize="ew-resize",h.nsResize="ns-resize",h.neswResize="nesw-resize",h.nwseResize="nwse-resize",h.move="move",h.text="text"})(x||(x={}));const k=class{constructor(t,i,n,e,o,c,l={}){s(this,"zIndex",0);s(this,"isMouseHovering",!1);s(this,"handleMouseMove",t=>{const i=this.ctx.canvas.getBoundingClientRect(),n=t.clientX-i.left,e=t.clientY-i.top;this.isMouseHovering=n>=this.left&&e>=this.top&&n<=this.left+this.width&&e<=this.top+this.height});this.left=t,this.top=i,this.width=n,this.height=e,this.cursorType=o,this.ctx=c,Object.entries(l).forEach(([a,u])=>this[a]=u),c.canvas.addEventListener("mousemove",this.handleMouseMove)}destructor(){this.ctx.canvas.removeEventListener("mousemove",this.handleMouseMove)}render(){this.isMouseHovering&&this.zIndex>=k.topLayerZIndex&&(k.topLayerZIndex=this.zIndex,k.topLayerCursorType=this.cursorType)}};let f=k;s(f,"topLayerZIndex",-1/0),s(f,"topLayerCursorType",x.defaultCursor);const C=class{constructor(t,i,n,e,o,c,l={}){s(this,"zIndex",0);s(this,"handleClick",t=>{const i=this.ctx.canvas.getBoundingClientRect(),n=t.clientX-i.left,e=t.clientY-i.top;n>=this.left&&e>=this.top&&n<=this.left+this.width&&e<=this.top+this.height&&(this.zIndex>C.topLayerZIndex?C.topLayerCallbacks=[this.onClick]:this.zIndex===C.topLayerZIndex&&C.topLayerCallbacks.push(this.onClick))});this.left=t,this.top=i,this.width=n,this.height=e,this.onClick=o,this.ctx=c,Object.entries(l).forEach(([a,u])=>this[a]=u),c.canvas.addEventListener("click",this.handleClick)}destructor(){this.ctx.canvas.removeEventListener("click",this.handleClick)}};let p=C;s(p,"topLayerZIndex",-1/0),s(p,"topLayerCallbacks",[]);const S=10;class r{constructor(t,i,n,e={}){s(this,"textMetrics");s(this,"top",0);s(this,"color","#000");s(this,"fontSize",50);s(this,"boundingBox");s(this,"leftClickZone");s(this,"rightClickZone");s(this,"prev",null);s(this,"setPosition",(t,i)=>{this.top=i;const n=i-this.textMetrics.fontBoundingBoxAscent;this.boundingBox.left=t,this.boundingBox.top=n,this.leftClickZone.left=t,this.leftClickZone.top=n,this.rightClickZone.left=t+this.width/2,this.rightClickZone.top=n});s(this,"render",()=>{this.boundingBox.render(),this.setStyle(),this.ctx.fillText(this.char,this.left,this.top)});s(this,"handleClickLeft",()=>{this.prev?(this.blinkingCursor.left=this.prev.rightClickZone.left+this.prev.rightClickZone.width,this.blinkingCursor.top=this.prev.rightClickZone.top,this.blinkingCursor.height=this.prev.fontSize):(this.blinkingCursor.left=this.leftClickZone.left,this.blinkingCursor.top=this.leftClickZone.top,this.blinkingCursor.height=this.fontSize),this.blinkingCursor.show()});s(this,"handleClickRight",()=>{this.blinkingCursor.left=this.rightClickZone.left+this.rightClickZone.width,this.blinkingCursor.top=this.rightClickZone.top,this.blinkingCursor.height=this.fontSize,this.blinkingCursor.show()});this.char=t,this.ctx=i,this.blinkingCursor=n,Object.entries(e).forEach(([l,a])=>this[l]=a),this.setStyle(),this.textMetrics=i.measureText(t);const o=this.textMetrics.width,c=this.textMetrics.fontBoundingBoxDescent+this.textMetrics.fontBoundingBoxAscent;this.boundingBox=new f(-1/0,-1/0,o,c,x.text,i,{zIndex:S}),this.leftClickZone=new p(-1/0,-1/0,o/2,c,this.handleClickLeft,i,{zIndex:S}),this.rightClickZone=new p(-1/0,-1/0,o/2,c,this.handleClickRight,i,{zIndex:S})}get left(){return this.boundingBox.left}get boundingBoxTop(){return this.boundingBox.top}get width(){return this.boundingBox.width}get height(){return this.boundingBox.height}destructor(){this.boundingBox.destructor(),this.leftClickZone.destructor(),this.rightClickZone.destructor()}setStyle(){this.ctx.fillStyle=this.color,this.ctx.font=`${this.fontSize}px sans-serif`}}const w=5,V=1e3;class d extends f{constructor(t,i,n,e,o={}){const c=t-w,l=i-w,a=2*w,u=2*w;super(c,l,a,u,n,e,I({zIndex:V},o));s(this,"borderColor","#999");s(this,"backgroundColor","#fff");s(this,"render",()=>{super.render(),this.ctx.beginPath(),this.ctx.setLineDash([]),this.ctx.arc(this.centerX,this.centerY,w,0,Math.PI*2),this.ctx.fillStyle=this.backgroundColor,this.ctx.fill(),this.ctx.strokeStyle=this.borderColor,this.ctx.stroke(),this.ctx.closePath()});this.centerX=t,this.centerY=i,this.cursorType=n}}const $="#999",H=1,m=10,K=100;class y extends f{constructor(t,i,n){const e=i.clone().subtract(t).rotate(Math.PI/2).normalize(),o=[t.clone().add(e.clone().multiplyScalar(m/2)),t.clone().add(e.clone().multiplyScalar(-m/2)),i.clone().add(e.clone().multiplyScalar(m/2)),i.clone().add(e.clone().multiplyScalar(-m/2))],c=Math.min(...o.map(g=>g.x)),l=Math.min(...o.map(g=>g.y)),a=Math.max(...o.map(g=>g.x)),u=Math.max(...o.map(g=>g.y)),O=a-c,j=u-l;super(c,l,O,j,x.move,n,{zIndex:K});this.from=t,this.to=i}render(){super.render(),this.ctx.beginPath(),this.ctx.strokeStyle=$,this.ctx.lineWidth=H,this.ctx.setLineDash([3]),this.ctx.moveTo(this.from.x,this.from.y),this.ctx.lineTo(this.to.x,this.to.y),this.ctx.stroke()}}const M=1e3;class G{constructor(t){s(this,"left",-1/0);s(this,"top",-1/0);s(this,"height",50);s(this,"startBlinkingTimestamp",0);this.ctx=t}show(){this.startBlinkingTimestamp=Date.now()}render(){(Date.now()-this.startBlinkingTimestamp)%M/M<.5&&(this.ctx.beginPath(),this.ctx.moveTo(this.left,this.top),this.ctx.lineTo(this.left,this.top+this.height),this.ctx.strokeStyle="#000",this.ctx.stroke())}}const{defaultCursor:J,ewResize:Z,nsResize:P,neswResize:T,nwseResize:R}=x;class Q{constructor(t,i={}){s(this,"canvas");s(this,"ctx");s(this,"left",0);s(this,"top",0);s(this,"width",400);s(this,"height",300);s(this,"backgroundColor","#fff");s(this,"paddingLeft",10);s(this,"paragraphs",[]);s(this,"sizeControlPoints",[]);s(this,"borders",[]);s(this,"blinkingCursor");s(this,"render",()=>{requestAnimationFrame(this.render),this.clearCanvas(),this.paragraphs.forEach(t=>t.render()),this.borders.forEach(t=>t.render()),this.sizeControlPoints.forEach(t=>t.render()),this.blinkingCursor.render(),this.canvas.style.cursor=f.topLayerCursorType,p.topLayerCallbacks.forEach(t=>t()),p.topLayerCallbacks=[]});s(this,"clearCanvas",()=>{this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),f.topLayerZIndex=-1/0,f.topLayerCursorType=J});Object.entries(i).forEach(([n,e])=>this[n]=e),this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.blinkingCursor=new G(this.ctx),this.initParagraphs(),this.initBorder(),this.initSizeControlPoints(),this.moveBlinkingCursorToEnd(),requestAnimationFrame(this.render)}destructor(){this.paragraphs.forEach(t=>t.destructor()),this.borders.forEach(t=>t.destructor()),this.sizeControlPoints.forEach(t=>t.destructor())}initParagraphs(){this.paragraphs=[new N([new r("W",this.ctx,this.blinkingCursor,{color:"red",fontSize:80}),new r("o",this.ctx,this.blinkingCursor,{color:"orange",fontSize:80}),new r("r",this.ctx,this.blinkingCursor,{color:"yellow",fontSize:80}),new r("k",this.ctx,this.blinkingCursor,{color:"green",fontSize:80}),new r("e",this.ctx,this.blinkingCursor,{color:"lightblue",fontSize:80}),new r("r",this.ctx,this.blinkingCursor,{color:"blue",fontSize:80}),new r("s",this.ctx,this.blinkingCursor,{color:"purple",fontSize:40}),new r(" ",this.ctx,this.blinkingCursor),new r("o",this.ctx,this.blinkingCursor,{color:"orange",fontSize:40}),new r("f",this.ctx,this.blinkingCursor,{color:"yellow",fontSize:40}),new r(" ",this.ctx,this.blinkingCursor),new r("t",this.ctx,this.blinkingCursor,{color:"lightblue",fontSize:40}),new r("h",this.ctx,this.blinkingCursor,{color:"blue",fontSize:40}),new r("e",this.ctx,this.blinkingCursor,{color:"purple",fontSize:40}),new r(" ",this.ctx,this.blinkingCursor),new r("w",this.ctx,this.blinkingCursor,{color:"orange",fontSize:80}),new r("o",this.ctx,this.blinkingCursor,{color:"yellow",fontSize:80}),new r("r",this.ctx,this.blinkingCursor,{color:"green",fontSize:80}),new r("l",this.ctx,this.blinkingCursor,{color:"lightblue",fontSize:80}),new r("d",this.ctx,this.blinkingCursor,{color:"blue",fontSize:80}),new r(",",this.ctx,this.blinkingCursor,{color:"purple",fontSize:80}),new r(" ",this.ctx,this.blinkingCursor),new r("u",this.ctx,this.blinkingCursor,{color:"orange",fontSize:80}),new r("n",this.ctx,this.blinkingCursor,{color:"yellow",fontSize:80}),new r("i",this.ctx,this.blinkingCursor,{color:"green",fontSize:80}),new r("t",this.ctx,this.blinkingCursor,{color:"lightblue",fontSize:80}),new r("e",this.ctx,this.blinkingCursor,{color:"blue",fontSize:80}),new r("!",this.ctx,this.blinkingCursor,{color:"purple",fontSize:80})],this.ctx,this.left+this.paddingLeft,this.top,this.width-this.paddingLeft)]}initBorder(){const t=new b(this.left,this.top),i=new b(this.left+this.width,this.top),n=new b(this.left,this.top+this.height),e=new b(this.left+this.width,this.top+this.height);this.borders=[new y(t,i,this.ctx),new y(i,e,this.ctx),new y(e,n,this.ctx),new y(n,t,this.ctx)]}initSizeControlPoints(){this.sizeControlPoints=[new d(this.left,this.top,R,this.ctx),new d(this.left,this.top+this.height/2,Z,this.ctx),new d(this.left,this.top+this.height,T,this.ctx),new d(this.left+this.width/2,this.top,P,this.ctx),new d(this.left+this.width/2,this.top+this.height,P,this.ctx),new d(this.left+this.width,this.top,T,this.ctx),new d(this.left+this.width,this.top+this.height/2,Z,this.ctx),new d(this.left+this.width,this.top+this.height,R,this.ctx)]}moveBlinkingCursorToEnd(){const t=this.blinkingCursor;if(this.paragraphs.length>0){const i=this.paragraphs[this.paragraphs.length-1],n=i.chars[i.chars.length-1];t.left=n.left+n.width,t.top=n.boundingBoxTop,t.height=n.fontSize}else t.left=this.left+this.paddingLeft,t.top=this.top;t.show()}}const z=W.exports.jsx;function U(){const h=B.exports.useRef(null);return B.exports.useEffect(()=>{h.current&&new Q(h.current,{left:100,top:100})},[]),z("div",{children:z("canvas",{ref:h,width:"800",height:"600"})})}D.render(z(X.StrictMode,{children:z(U,{})}),document.getElementById("root"));
